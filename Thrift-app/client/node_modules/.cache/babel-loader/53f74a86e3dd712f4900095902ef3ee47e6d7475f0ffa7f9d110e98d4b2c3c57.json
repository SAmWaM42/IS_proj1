{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\IS_PROJ1\\\\IS_proj1\\\\Thrift-app\\\\client\\\\src\\\\Components\\\\ContextWrapper.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useCallback, useContext } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GlobalContext = /*#__PURE__*/createContext();\nexport const ContextProvider = ({\n  children\n}) => {\n  _s();\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [gottenSelf, setGottenSelf] = useState(false);\n  const [cartVisible, setCartVisible] = useState(false);\n  const [myData, setMyData] = useState({});\n  const getSelf = useCallback(async () => {\n    try {\n      const response = await fetch(\"http://localhost:5000/user/me\", {\n        credentials: 'include'\n      });\n      if (!response.ok) {\n        throw new Error(\"fetch self failed\");\n      }\n      if (response) {\n        setLoggedIn(true);\n        const result = await response.json();\n        setMyData(result);\n      }\n    } catch (err) {\n      console.error(\"error validating self\", err.message);\n    } finally {\n      setGottenSelf(true);\n    }\n  }, []);\n  useEffect(() => {\n    getSelf();\n  }, []);\n  const handleUpdate = ({\n    myData,\n    loggedIn\n  }) => {\n    setMyData(myData);\n    setLoggedIn(loggedIn);\n  };\n  const contextData = {\n    cartVisible,\n    setCartVisible,\n    loggedIn,\n    myData,\n    gottenSelf,\n    handleUpdate\n  };\n  return /*#__PURE__*/_jsxDEV(GlobalContext.Provider, {\n    value: contextData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n_s(ContextProvider, \"y3/TWwpLqVEaxpoSRNcKpufgTNw=\");\n_c = ContextProvider;\nvar _c;\n$RefreshReg$(_c, \"ContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useCallback","useContext","jsxDEV","_jsxDEV","GlobalContext","ContextProvider","children","_s","loggedIn","setLoggedIn","gottenSelf","setGottenSelf","cartVisible","setCartVisible","myData","setMyData","getSelf","response","fetch","credentials","ok","Error","result","json","err","console","error","message","handleUpdate","contextData","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/IS_PROJ1/IS_proj1/Thrift-app/client/src/Components/ContextWrapper.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useCallback, useContext } from 'react';\r\n\r\nexport const GlobalContext=createContext();\r\nexport const ContextProvider=({children})=>\r\n{\r\n    const [loggedIn,setLoggedIn]=useState(false);\r\n    const [gottenSelf,setGottenSelf]=useState(false);\r\n    const [cartVisible,setCartVisible]= useState(false);\r\n    const [myData,setMyData]=useState({});\r\n    \r\n\r\n    const getSelf=useCallback(async ()=>\r\n    {\r\n      try\r\n      {\r\n        const response=await fetch(\"http://localhost:5000/user/me\",{credentials:'include'})\r\n        if(!response.ok)\r\n        {\r\n          throw new Error(\"fetch self failed\");\r\n        }\r\n\r\n        if(response)\r\n        {\r\n          setLoggedIn(true);\r\n          const result=await response.json();\r\n          setMyData(result);\r\n        }\r\n\r\n      }\r\n      catch(err)\r\n      {\r\n            console.error(\"error validating self\",err.message);\r\n      }\r\n      finally\r\n      {\r\n        setGottenSelf(true);\r\n      }\r\n\r\n    },[]);\r\n    useEffect(()=>{\r\n        getSelf();\r\n    },[])\r\n\r\n    const handleUpdate=({myData,loggedIn})=>\r\n    {\r\n      setMyData(myData);\r\n      setLoggedIn(loggedIn);\r\n\r\n    }\r\n    const contextData=\r\n    {\r\n        cartVisible,\r\n        setCartVisible,\r\n        loggedIn,\r\n        myData,\r\n        gottenSelf,\r\n        handleUpdate\r\n\r\n    }\r\n\r\n    return(\r\n        <GlobalContext.Provider value={contextData}>\r\n            {children}\r\n     </GlobalContext.Provider>\r\n\r\n    );\r\n\r\n\r\n\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,UAAU,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3F,OAAO,MAAMC,aAAa,gBAACP,aAAa,CAAC,CAAC;AAC1C,OAAO,MAAMQ,eAAe,GAACA,CAAC;EAACC;AAAQ,CAAC,KACxC;EAAAC,EAAA;EACI,MAAM,CAACC,QAAQ,EAACC,WAAW,CAAC,GAACX,QAAQ,CAAC,KAAK,CAAC;EAC5C,MAAM,CAACY,UAAU,EAACC,aAAa,CAAC,GAACb,QAAQ,CAAC,KAAK,CAAC;EAChD,MAAM,CAACc,WAAW,EAACC,cAAc,CAAC,GAAEf,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACgB,MAAM,EAACC,SAAS,CAAC,GAACjB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAGrC,MAAMkB,OAAO,GAAChB,WAAW,CAAC,YAC1B;IACE,IACA;MACE,MAAMiB,QAAQ,GAAC,MAAMC,KAAK,CAAC,+BAA+B,EAAC;QAACC,WAAW,EAAC;MAAS,CAAC,CAAC;MACnF,IAAG,CAACF,QAAQ,CAACG,EAAE,EACf;QACE,MAAM,IAAIC,KAAK,CAAC,mBAAmB,CAAC;MACtC;MAEA,IAAGJ,QAAQ,EACX;QACER,WAAW,CAAC,IAAI,CAAC;QACjB,MAAMa,MAAM,GAAC,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;QAClCR,SAAS,CAACO,MAAM,CAAC;MACnB;IAEF,CAAC,CACD,OAAME,GAAG,EACT;MACMC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAACF,GAAG,CAACG,OAAO,CAAC;IACxD,CAAC,SAED;MACEhB,aAAa,CAAC,IAAI,CAAC;IACrB;EAEF,CAAC,EAAC,EAAE,CAAC;EACLZ,SAAS,CAAC,MAAI;IACViB,OAAO,CAAC,CAAC;EACb,CAAC,EAAC,EAAE,CAAC;EAEL,MAAMY,YAAY,GAACA,CAAC;IAACd,MAAM;IAACN;EAAQ,CAAC,KACrC;IACEO,SAAS,CAACD,MAAM,CAAC;IACjBL,WAAW,CAACD,QAAQ,CAAC;EAEvB,CAAC;EACD,MAAMqB,WAAW,GACjB;IACIjB,WAAW;IACXC,cAAc;IACdL,QAAQ;IACRM,MAAM;IACNJ,UAAU;IACVkB;EAEJ,CAAC;EAED,oBACIzB,OAAA,CAACC,aAAa,CAAC0B,QAAQ;IAACC,KAAK,EAAEF,WAAY;IAAAvB,QAAA,EACtCA;EAAQ;IAAA0B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACQ,CAAC;AAM9B,CAAC;AAAA5B,EAAA,CAlEYF,eAAe;AAAA+B,EAAA,GAAf/B,eAAe;AAAA,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}