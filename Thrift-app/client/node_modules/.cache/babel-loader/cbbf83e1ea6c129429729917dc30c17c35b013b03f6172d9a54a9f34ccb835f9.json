{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\IS_PROJ1\\\\IS_proj1\\\\Thrift-app\\\\client\\\\src\\\\Pages\\\\chatboxpage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallbac } from 'react';\nimport { useParams } from 'react-router-dom';\nimport './chatboxpage.css';\nimport Chatbox from '../Components/chatbox';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatboxPage() {\n  _s();\n  const {\n    chatId\n  } = useParams();\n  const url = `http://localhost:5000/user/chats/${chatId}`;\n  const [data, setData] = useState(null);\n  const [loaded, setLoaded] = useState(false);\n  const fetchConvo = useCallback(async () => {\n    setLoaded(false);\n    try {\n      const info = await fetch(url, {\n        credentials: 'include'\n      });\n      const result = await info.json();\n      if (!info.ok) throw new Error(result.message || 'Failed to fetch conversation.');\n      setData(result);\n    } catch (err) {\n      console.log(err);\n    } finally {\n      setLoaded(true);\n    }\n  }, [chatId, url]);\n  useEffect(() => {\n    fetchConvo();\n  }, [url]);\n\n  // Fallback demo data if backend fails\n  const sampleChat = {\n    message: [{\n      sender: 'You',\n      content: 'Hey! Howâ€™s the thrift shirt?',\n      time: '10:00 AM'\n    }, {\n      sender: 'Seller',\n      content: 'Looks perfect, thanks for asking!',\n      time: '10:02 AM'\n    }, {\n      sender: 'You',\n      content: 'Iâ€™ll send payment shortly.',\n      time: '10:03 AM'\n    }, {\n      sender: 'Seller',\n      content: 'Great. Let me know once you do ðŸ˜Š',\n      time: '10:04 AM'\n    }]\n  };\n  return loaded ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chatbox-page\",\n    children: /*#__PURE__*/_jsxDEV(Chatbox, {\n      message: (data === null || data === void 0 ? void 0 : data.message) || sampleChat.message,\n      reload: fetchConvo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chatbox-page\",\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading chats\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 35\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatboxPage, \"evrz0QYFlW2HpgZN8+fjpisZj44=\", false, function () {\n  return [useParams];\n});\n_c = ChatboxPage;\nexport default ChatboxPage;\nvar _c;\n$RefreshReg$(_c, \"ChatboxPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallbac","useParams","Chatbox","jsxDEV","_jsxDEV","ChatboxPage","_s","chatId","url","data","setData","loaded","setLoaded","fetchConvo","useCallback","info","fetch","credentials","result","json","ok","Error","message","err","console","log","sampleChat","sender","content","time","className","children","reload","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/IS_PROJ1/IS_proj1/Thrift-app/client/src/Pages/chatboxpage.js"],"sourcesContent":["import React, { useState, useEffect, useCallbac } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport './chatboxpage.css';\r\nimport Chatbox from '../Components/chatbox';\r\n\r\nfunction ChatboxPage() {\r\n  const { chatId } = useParams();\r\n  const url = `http://localhost:5000/user/chats/${chatId}`;\r\n  const [data, setData] = useState(null);\r\n  const [loaded, setLoaded] = useState(false);\r\n\r\n  const fetchConvo = useCallback(async () => {\r\n    setLoaded(false);\r\n    try {\r\n      const info = await fetch(url, { credentials: 'include' });\r\n      const result = await info.json();\r\n      if (!info.ok) throw new Error(result.message || 'Failed to fetch conversation.');\r\n      setData(result);\r\n    } catch (err) {\r\n      console.log(err);\r\n    } finally {\r\n      setLoaded(true);\r\n    }\r\n  }, [chatId, url]);\r\n\r\n  useEffect(() => {\r\n    fetchConvo();\r\n  }, [url]);\r\n\r\n  // Fallback demo data if backend fails\r\n  const sampleChat = {\r\n    message: [\r\n      { sender: 'You', content: 'Hey! Howâ€™s the thrift shirt?', time: '10:00 AM' },\r\n      { sender: 'Seller', content: 'Looks perfect, thanks for asking!', time: '10:02 AM' },\r\n      { sender: 'You', content: 'Iâ€™ll send payment shortly.', time: '10:03 AM' },\r\n      { sender: 'Seller', content: 'Great. Let me know once you do ðŸ˜Š', time: '10:04 AM' },\r\n    ]\r\n  };\r\n\r\n  return loaded ? (\r\n    <div className=\"chatbox-page\">\r\n      <Chatbox message={data?.message || sampleChat.message} reload={fetchConvo} />\r\n    </div>\r\n  ) : (\r\n    <div className=\"chatbox-page\"><h1>Loading chatsâ€¦</h1></div>\r\n  );\r\n}\r\n\r\nexport default ChatboxPage;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC9D,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,OAAO,mBAAmB;AAC1B,OAAOC,OAAO,MAAM,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,SAASC,WAAWA,CAAA,EAAG;EAAAC,EAAA;EACrB,MAAM;IAAEC;EAAO,CAAC,GAAGN,SAAS,CAAC,CAAC;EAC9B,MAAMO,GAAG,GAAG,oCAAoCD,MAAM,EAAE;EACxD,MAAM,CAACE,IAAI,EAAEC,OAAO,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACa,MAAM,EAAEC,SAAS,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAE3C,MAAMe,UAAU,GAAGC,WAAW,CAAC,YAAY;IACzCF,SAAS,CAAC,KAAK,CAAC;IAChB,IAAI;MACF,MAAMG,IAAI,GAAG,MAAMC,KAAK,CAACR,GAAG,EAAE;QAAES,WAAW,EAAE;MAAU,CAAC,CAAC;MACzD,MAAMC,MAAM,GAAG,MAAMH,IAAI,CAACI,IAAI,CAAC,CAAC;MAChC,IAAI,CAACJ,IAAI,CAACK,EAAE,EAAE,MAAM,IAAIC,KAAK,CAACH,MAAM,CAACI,OAAO,IAAI,+BAA+B,CAAC;MAChFZ,OAAO,CAACQ,MAAM,CAAC;IACjB,CAAC,CAAC,OAAOK,GAAG,EAAE;MACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAClB,CAAC,SAAS;MACRX,SAAS,CAAC,IAAI,CAAC;IACjB;EACF,CAAC,EAAE,CAACL,MAAM,EAAEC,GAAG,CAAC,CAAC;EAEjBT,SAAS,CAAC,MAAM;IACdc,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,CAACL,GAAG,CAAC,CAAC;;EAET;EACA,MAAMkB,UAAU,GAAG;IACjBJ,OAAO,EAAE,CACP;MAAEK,MAAM,EAAE,KAAK;MAAEC,OAAO,EAAE,8BAA8B;MAAEC,IAAI,EAAE;IAAW,CAAC,EAC5E;MAAEF,MAAM,EAAE,QAAQ;MAAEC,OAAO,EAAE,mCAAmC;MAAEC,IAAI,EAAE;IAAW,CAAC,EACpF;MAAEF,MAAM,EAAE,KAAK;MAAEC,OAAO,EAAE,4BAA4B;MAAEC,IAAI,EAAE;IAAW,CAAC,EAC1E;MAAEF,MAAM,EAAE,QAAQ;MAAEC,OAAO,EAAE,mCAAmC;MAAEC,IAAI,EAAE;IAAW,CAAC;EAExF,CAAC;EAED,OAAOlB,MAAM,gBACXP,OAAA;IAAK0B,SAAS,EAAC,cAAc;IAAAC,QAAA,eAC3B3B,OAAA,CAACF,OAAO;MAACoB,OAAO,EAAE,CAAAb,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEa,OAAO,KAAII,UAAU,CAACJ,OAAQ;MAACU,MAAM,EAAEnB;IAAW;MAAAoB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC1E,CAAC,gBAENhC,OAAA;IAAK0B,SAAS,EAAC,cAAc;IAAAC,QAAA,eAAC3B,OAAA;MAAA2B,QAAA,EAAI;IAAc;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAC3D;AACH;AAAC9B,EAAA,CAzCQD,WAAW;EAAA,QACCJ,SAAS;AAAA;AAAAoC,EAAA,GADrBhC,WAAW;AA2CpB,eAAeA,WAAW;AAAC,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}